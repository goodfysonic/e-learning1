{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useSelector } from 'react-redux';\nimport accountSelectors from '@selectors/account';\nimport useFetchAction from './useFetchAction';\nimport { accountActions } from '@store/actions';\nimport useActionLoading from './useActionLoading';\nimport { getCacheAccessToken } from '@services/userService';\nconst useAuth = () => {\n  _s();\n  const profile = useSelector(accountSelectors.selectProfile);\n  const token = getCacheAccessToken();\n  const immediate = !!token && !profile;\n  useFetchAction(accountActions.getProfile, {\n    immediate\n  });\n  const {\n    loading\n  } = useActionLoading(accountActions.getProfile.type);\n  const permissions = profile?.accountDto?.group?.permissions?.map(permission => permission.action) || profile?.permissions?.map(permission => permission.action);\n  const kind = profile?.kind;\n  return {\n    isAuthenticated: !!profile,\n    profile,\n    kind,\n    permissions,\n    token,\n    loading: immediate || loading\n  };\n};\n_s(useAuth, \"FWCyRafwYlBRfDzrecFOwMGlLiY=\", false, function () {\n  return [useSelector, useFetchAction, useActionLoading];\n});\nexport default useAuth;","map":{"version":3,"names":["useSelector","accountSelectors","useFetchAction","accountActions","useActionLoading","getCacheAccessToken","useAuth","_s","profile","selectProfile","token","immediate","getProfile","loading","type","permissions","accountDto","group","map","permission","action","kind","isAuthenticated"],"sources":["C:/Users/PC/Downloads/elms-cms/elms-cms/source/src/hooks/useAuth.js"],"sourcesContent":["import { useSelector } from 'react-redux';\r\n\r\nimport accountSelectors from '@selectors/account';\r\nimport useFetchAction from './useFetchAction';\r\nimport { accountActions } from '@store/actions';\r\nimport useActionLoading from './useActionLoading';\r\nimport { getCacheAccessToken } from '@services/userService';\r\n\r\nconst useAuth = () => {\r\n    const profile = useSelector(accountSelectors.selectProfile);\r\n    const token = getCacheAccessToken();\r\n\r\n    const immediate = !!token && !profile;\r\n\r\n    useFetchAction(accountActions.getProfile, { immediate });\r\n\r\n    const { loading } = useActionLoading(accountActions.getProfile.type);\r\n\r\n    const permissions =\r\n        profile?.accountDto?.group?.permissions?.map((permission) => permission.action) ||\r\n        profile?.permissions?.map((permission) => permission.action);\r\n    const kind = profile?.kind;\r\n\r\n    return { isAuthenticated: !!profile, profile, kind, permissions, token, loading: immediate || loading };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,aAAa;AAEzC,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAASC,cAAc,QAAQ,gBAAgB;AAC/C,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,SAASC,mBAAmB,QAAQ,uBAAuB;AAE3D,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAMC,OAAO,GAAGR,WAAW,CAACC,gBAAgB,CAACQ,aAAa,CAAC;EAC3D,MAAMC,KAAK,GAAGL,mBAAmB,CAAC,CAAC;EAEnC,MAAMM,SAAS,GAAG,CAAC,CAACD,KAAK,IAAI,CAACF,OAAO;EAErCN,cAAc,CAACC,cAAc,CAACS,UAAU,EAAE;IAAED;EAAU,CAAC,CAAC;EAExD,MAAM;IAAEE;EAAQ,CAAC,GAAGT,gBAAgB,CAACD,cAAc,CAACS,UAAU,CAACE,IAAI,CAAC;EAEpE,MAAMC,WAAW,GACbP,OAAO,EAAEQ,UAAU,EAAEC,KAAK,EAAEF,WAAW,EAAEG,GAAG,CAAEC,UAAU,IAAKA,UAAU,CAACC,MAAM,CAAC,IAC/EZ,OAAO,EAAEO,WAAW,EAAEG,GAAG,CAAEC,UAAU,IAAKA,UAAU,CAACC,MAAM,CAAC;EAChE,MAAMC,IAAI,GAAGb,OAAO,EAAEa,IAAI;EAE1B,OAAO;IAAEC,eAAe,EAAE,CAAC,CAACd,OAAO;IAAEA,OAAO;IAAEa,IAAI;IAAEN,WAAW;IAAEL,KAAK;IAAEG,OAAO,EAAEF,SAAS,IAAIE;EAAQ,CAAC;AAC3G,CAAC;AAACN,EAAA,CAhBID,OAAO;EAAA,QACON,WAAW,EAK3BE,cAAc,EAEME,gBAAgB;AAAA;AAUxC,eAAeE,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}