{"ast":null,"code":"var _s = $RefreshSig$();\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { DndContext } from '@dnd-kit/core';\nimport { SortableContext, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport React from 'react';\nimport './DragDropTableV2.scss';\nimport { MenuOutlined } from '@ant-design/icons';\nimport BaseTable from './BaseTable';\nconst DraggableRow = ({\n  children,\n  ...props\n}) => {\n  _s();\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    setActivatorNodeRef,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: props['data-row-key']\n  });\n  const style = {\n    ...props.style,\n    transform: CSS.Transform.toString(transform && {\n      ...transform,\n      scaleY: 1\n    }),\n    transition,\n    ...(isDragging ? {\n      position: 'relative',\n      zIndex: 9999\n    } : {})\n  };\n  return /*#__PURE__*/React.createElement(\"tr\", _extends({}, props, {\n    ref: setNodeRef,\n    style: style\n  }, attributes), React.Children.map(children, child => {\n    if (child.key === 'sort') {\n      return /*#__PURE__*/React.cloneElement(child, {\n        children: /*#__PURE__*/React.createElement(MenuOutlined, _extends({\n          ref: setActivatorNodeRef,\n          style: {\n            touchAction: 'none',\n            cursor: 'move'\n          }\n        }, listeners))\n      });\n    }\n    return child;\n  }));\n};\n_s(DraggableRow, \"YBNwgRdE8Xx0CwPPxbISU6j5TqA=\", false, function () {\n  return [useSortable];\n});\n_c = DraggableRow;\nconst DragDropTableV2 = ({\n  dataSource,\n  onDragEnd,\n  onChange,\n  rowSelection,\n  columns,\n  loading,\n  pagination,\n  rowKey = record => record.id,\n  ...props\n}) => {\n  return /*#__PURE__*/React.createElement(DndContext, {\n    onDragEnd: ({\n      active,\n      over\n    }) => onDragEnd(active, over)\n  }, /*#__PURE__*/React.createElement(SortableContext\n  // rowKey array\n  , {\n    items: dataSource.map(i => i.id),\n    strategy: verticalListSortingStrategy\n  }, /*#__PURE__*/React.createElement(BaseTable, _extends({\n    components: {\n      body: {\n        row: DraggableRow\n      }\n    },\n    rowSelection: rowSelection,\n    loading: loading,\n    pagination: pagination,\n    onChange: onChange,\n    rowKey: rowKey,\n    columns: columns,\n    dataSource: dataSource,\n    scroll: null\n  }, props))));\n};\n_c2 = DragDropTableV2;\nexport default DragDropTableV2;\nvar _c, _c2;\n$RefreshReg$(_c, \"DraggableRow\");\n$RefreshReg$(_c2, \"DragDropTableV2\");","map":{"version":3,"names":["DndContext","SortableContext","useSortable","verticalListSortingStrategy","CSS","React","MenuOutlined","BaseTable","DraggableRow","children","props","_s","attributes","listeners","setNodeRef","setActivatorNodeRef","transform","transition","isDragging","id","style","Transform","toString","scaleY","position","zIndex","createElement","_extends","ref","Children","map","child","key","cloneElement","touchAction","cursor","_c","DragDropTableV2","dataSource","onDragEnd","onChange","rowSelection","columns","loading","pagination","rowKey","record","active","over","items","i","strategy","components","body","row","scroll","_c2","$RefreshReg$"],"sources":["C:/Users/PC/Downloads/elms-cms/elms-cms/source/src/components/common/table/DragDropTableV2.js"],"sourcesContent":["import { DndContext } from '@dnd-kit/core';\r\nimport { SortableContext, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\nimport React from 'react';\r\nimport './DragDropTableV2.scss';\r\nimport { MenuOutlined } from '@ant-design/icons';\r\nimport BaseTable from './BaseTable';\r\n\r\nconst DraggableRow = ({ children, ...props }) => {\r\n    const { attributes, listeners, setNodeRef, setActivatorNodeRef, transform, transition, isDragging } = useSortable({\r\n        id: props['data-row-key'],\r\n    });\r\n    const style = {\r\n        ...props.style,\r\n        transform: CSS.Transform.toString(\r\n            transform && {\r\n                ...transform,\r\n                scaleY: 1,\r\n            },\r\n        ),\r\n        transition,\r\n        ...(isDragging\r\n            ? {\r\n                position: 'relative',\r\n                zIndex: 9999,\r\n            }\r\n            : {}),\r\n    };\r\n    return (\r\n        <tr {...props} ref={setNodeRef} style={style} {...attributes}>\r\n            {React.Children.map(children, (child) => {\r\n                if (child.key === 'sort') {\r\n                    return React.cloneElement(child, {\r\n                        children: (\r\n                            <MenuOutlined\r\n                                ref={setActivatorNodeRef}\r\n                                style={{\r\n                                    touchAction: 'none',\r\n                                    cursor: 'move',\r\n                                }}\r\n                                {...listeners}\r\n                            />\r\n                        ),\r\n                    });\r\n                }\r\n                return child;\r\n            })}\r\n        </tr>\r\n    );\r\n};\r\n\r\nconst DragDropTableV2 = ({\r\n    dataSource,\r\n    onDragEnd,\r\n    onChange,\r\n    rowSelection,\r\n    columns,\r\n    loading,\r\n    pagination,\r\n    rowKey = (record) => record.id,\r\n    ...props\r\n}) => {\r\n    return (\r\n        <DndContext onDragEnd={({ active, over }) => onDragEnd(active, over)}>\r\n            <SortableContext\r\n                // rowKey array\r\n                items={dataSource.map((i) => i.id)}\r\n                strategy={verticalListSortingStrategy}\r\n            >\r\n                <BaseTable\r\n                    components={{\r\n                        body: {\r\n                            row: DraggableRow,\r\n                        },\r\n                    }}\r\n                    rowSelection={rowSelection}\r\n                    loading={loading}\r\n                    pagination={pagination}\r\n                    onChange={onChange}\r\n                    rowKey={rowKey}\r\n                    columns={columns}\r\n                    dataSource={dataSource}\r\n                    scroll={null}\r\n                    {...props}\r\n                />\r\n            </SortableContext>\r\n        </DndContext>\r\n    );\r\n};\r\nexport default DragDropTableV2;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}