{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Routes, BrowserRouter, Route } from 'react-router-dom';\nimport ValidateAccess from './ValidateAccess';\nimport AppNavigate from '@modules/main/AppNavigate';\nimport routes from '.';\nimport useAuth from '@hooks/useAuth';\nimport Loading from '@components/common/loading';\nimport { useCurrency } from '@components/common/elements/Currency';\nimport { useDispatch } from 'react-redux';\nimport useFetch from '@hooks/useFetch';\nimport apiConfig from '@constants/apiConfig';\nimport { UserTypes } from '@constants';\nimport { appActions } from '@store/actions';\nimport { getCacheAccessToken } from '@services/userService';\nimport { webSocket } from '@utils/webSocket';\nimport useTranslate from '@hooks/useTranslate';\nimport { actions } from '@store/actions/app';\nconst routesArray = Object.values(routes);\nconst AppRoutes = () => {\n  _s();\n  const {\n    isAuthenticated,\n    loading: loadingProfile,\n    profile\n  } = useAuth();\n  const translate = useTranslate();\n  const dispatch = useDispatch();\n  const renderRoute = route => /*#__PURE__*/React.createElement(Route, {\n    key: route.path || 'not-found',\n    path: route.path,\n    index: route.index,\n    element: loadingProfile ? /*#__PURE__*/React.createElement(Loading, {\n      show: true\n    }) : /*#__PURE__*/React.createElement(ValidateAccess, {\n      permissions: route.permissions,\n      separate: route.separateCheck,\n      onValidatePermissions: route.validatePermissions,\n      authRequire: route.auth,\n      component: route.component,\n      componentProps: route.componentProps,\n      isAuthenticated: isAuthenticated,\n      profile: profile,\n      layout: route.layout,\n      path: route.path,\n      breadcrumbs: route.breadcrumbs\n    })\n  });\n  const {\n    data: dataSetting\n  } = useFetch(apiConfig.settings.settings, {\n    immediate: true,\n    mappingData: ({\n      data\n    }) => data\n  });\n  useEffect(() => {\n    dispatch(actions.settingSystem(dataSetting));\n  }, [dataSetting]);\n  useEffect(() => {\n    const accessToken = getCacheAccessToken();\n    webSocket(accessToken, translate);\n  }, []);\n  return /*#__PURE__*/React.createElement(BrowserRouter, null, /*#__PURE__*/React.createElement(Routes, null, /*#__PURE__*/React.createElement(Route, {\n    element: /*#__PURE__*/React.createElement(AppNavigate, null)\n  }, routesArray.map(renderRoute))));\n};\n_s(AppRoutes, \"F5rCPkN36/blYLzbIkquly/nLKc=\", false, function () {\n  return [useAuth, useTranslate, useDispatch, useFetch];\n});\n_c = AppRoutes;\nexport default AppRoutes;\nvar _c;\n$RefreshReg$(_c, \"AppRoutes\");","map":{"version":3,"names":["React","useEffect","Routes","BrowserRouter","Route","ValidateAccess","AppNavigate","routes","useAuth","Loading","useCurrency","useDispatch","useFetch","apiConfig","UserTypes","appActions","getCacheAccessToken","webSocket","useTranslate","actions","routesArray","Object","values","AppRoutes","_s","isAuthenticated","loading","loadingProfile","profile","translate","dispatch","renderRoute","route","createElement","key","path","index","element","show","permissions","separate","separateCheck","onValidatePermissions","validatePermissions","authRequire","auth","component","componentProps","layout","breadcrumbs","data","dataSetting","settings","immediate","mappingData","settingSystem","accessToken","map","_c","$RefreshReg$"],"sources":["C:/Users/PC/Downloads/elms-cms/elms-cms/source/src/routes/routes.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Routes, BrowserRouter, Route } from 'react-router-dom';\r\nimport ValidateAccess from './ValidateAccess';\r\nimport AppNavigate from '@modules/main/AppNavigate';\r\nimport routes from '.';\r\nimport useAuth from '@hooks/useAuth';\r\nimport Loading from '@components/common/loading';\r\nimport { useCurrency } from '@components/common/elements/Currency';\r\nimport { useDispatch } from 'react-redux';\r\nimport useFetch from '@hooks/useFetch';\r\nimport apiConfig from '@constants/apiConfig';\r\nimport { UserTypes } from '@constants';\r\nimport { appActions } from '@store/actions';\r\nimport { getCacheAccessToken } from '@services/userService';\r\nimport { webSocket } from '@utils/webSocket';\r\nimport useTranslate from '@hooks/useTranslate';\r\nimport { actions } from '@store/actions/app';\r\nconst routesArray = Object.values(routes); \r\n\r\nconst AppRoutes = () => {\r\n    const { isAuthenticated, loading: loadingProfile, profile } = useAuth();\r\n    const translate = useTranslate();\r\n    const dispatch = useDispatch();\r\n    const renderRoute = (route) => (\r\n        <Route\r\n            key={route.path || 'not-found'}\r\n            path={route.path}\r\n            index={route.index}\r\n            element={\r\n                loadingProfile ? (\r\n                    <Loading show />\r\n                ) : (\r\n                    <ValidateAccess\r\n                        permissions={route.permissions}\r\n                        separate={route.separateCheck}\r\n                        onValidatePermissions={route.validatePermissions}\r\n                        authRequire={route.auth}\r\n                        component={route.component}\r\n                        componentProps={route.componentProps}\r\n                        isAuthenticated={isAuthenticated}\r\n                        profile={profile}\r\n                        layout={route.layout}\r\n                        path={route.path}\r\n                        breadcrumbs={route.breadcrumbs}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n    const { data: dataSetting } = useFetch(apiConfig.settings.settings, {\r\n        immediate: true,\r\n        mappingData: ({ data }) => data,\r\n    });\r\n    useEffect(() => {\r\n        dispatch(actions.settingSystem(dataSetting));\r\n    }, [dataSetting]);\r\n\r\n    useEffect(() => {\r\n        const accessToken = getCacheAccessToken();\r\n        webSocket(accessToken, translate);\r\n    }, []);\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <Routes>\r\n                <Route element={<AppNavigate />}>{routesArray.map(renderRoute)}</Route>\r\n            </Routes>\r\n        </BrowserRouter>\r\n    );\r\n};\r\n\r\nexport default AppRoutes;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}