{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Form, Input, Select, Button, Breadcrumb, message } from 'antd';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nconst apiUrl = 'https://elms-tenant-api.developteam.net/api';\nconst getSubject = id => axios.get(`${apiUrl}/v1/subject/${id}`);\nconst createSubject = subject => axios.post(`${apiUrl}/v1/subject/create`, subject);\nconst updateSubject = (id, subject) => axios.put(`${apiUrl}/v1/subject/update/${id}`, subject);\nconst {\n  Option\n} = Select;\nconst subjectForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [form] = Form.useForm();\n  const isEditing = id !== undefined;\n  useEffect(() => {\n    if (isEditing) {\n      getSubject(id).then(response => {\n        console.log('Data received:', response.data); // Log the received data\n        form.setFieldsValue(response.data);\n      }).catch(err => {\n        console.error('Error fetching subject', err.response || err); // Log the error response\n        message.error('Lỗi khi tải thông tin môn học');\n      });\n    }\n  }, [id, form]);\n  const handleSubmit = async values => {\n    const action = isEditing ? updateSubject(id, values) : createSubject(values);\n    try {\n      const result = await action;\n      console.log('Success:', result.data); // Log the success response\n      navigate('/subjects');\n      message.success('Lưu thông tin môn học thành công');\n    } catch (error) {\n      console.error('Save error:', error.response || error); // Log the error response\n      message.error('Lỗi khi lưu thông tin môn học');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"20px\",\n      maxWidth: \"600px\",\n      margin: \"0 auto\"\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    style: {\n      margin: '16px 0'\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, null, \"Trang ch\\u1EE7\"), /*#__PURE__*/React.createElement(Breadcrumb.Item, null, \"M\\xF4n h\\u1ECDc\"), /*#__PURE__*/React.createElement(Breadcrumb.Item, null, isEditing ? 'Sửa môn học' : 'Thêm môn học')), /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    layout: \"vertical\",\n    onFinish: handleSubmit\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"name\",\n    label: \"T\\xEAn m\\xF4n h\\u1ECDc\",\n    rules: [{\n      required: true,\n      message: 'Vui lòng nhập tên môn học!'\n    }]\n  }, /*#__PURE__*/React.createElement(Input, null)), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"code\",\n    label: \"M\\xE3 m\\xF4n h\\u1ECDc\",\n    rules: [{\n      required: true,\n      message: 'Vui lòng nhập mã môn học!'\n    }]\n  }, /*#__PURE__*/React.createElement(Input, null)), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"status\",\n    label: \"Tr\\u1EA1ng th\\xE1i\",\n    rules: [{\n      required: true,\n      message: 'Vui lòng chọn trạng thái!'\n    }]\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Ch\\u1ECDn tr\\u1EA1ng th\\xE1i\"\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"active\"\n  }, \"Ho\\u1EA1t \\u0111\\u1ED9ng\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"inactive\"\n  }, \"Kh\\xF4ng ho\\u1EA1t \\u0111\\u1ED9ng\"))), /*#__PURE__*/React.createElement(Form.Item, null, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, isEditing ? 'Cập nhật' : 'Thêm mới'), isEditing && /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginLeft: '8px'\n    },\n    onClick: () => form.resetFields(),\n    danger: true\n  }, \"H\\u1EE7y b\\u1ECF\"))));\n};\n_s(subjectForm, \"2ivoqBq1mC56BMg/IsESvMR8bL4=\", false, function () {\n  return [useParams, useNavigate, Form.useForm];\n});\nexport default subjectForm;","map":{"version":3,"names":["React","useState","useEffect","Form","Input","Select","Button","Breadcrumb","message","useParams","useNavigate","axios","apiUrl","getSubject","id","get","createSubject","subject","post","updateSubject","put","Option","subjectForm","_s","navigate","form","useForm","isEditing","undefined","then","response","console","log","data","setFieldsValue","catch","err","error","handleSubmit","values","action","result","success","createElement","style","padding","maxWidth","margin","Item","layout","onFinish","name","label","rules","required","placeholder","value","type","htmlType","marginLeft","onClick","resetFields","danger"],"sources":["C:/Users/PC/Downloads/elms-cms/elms-cms/source/src/modules/Subject/subjectForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Select, Button, Breadcrumb, message } from 'antd';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst apiUrl = 'https://elms-tenant-api.developteam.net/api'; \r\n\r\nconst getSubject = (id) => axios.get(`${apiUrl}/v1/subject/${id}`);\r\nconst createSubject = (subject) => axios.post(`${apiUrl}/v1/subject/create`, subject);\r\nconst updateSubject = (id, subject) => axios.put(`${apiUrl}/v1/subject/update/${id}`, subject);\r\n\r\nconst { Option } = Select;\r\n\r\nconst subjectForm = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [form] = Form.useForm();\r\n    const isEditing = id !== undefined;\r\n\r\n    useEffect(() => {\r\n        if (isEditing) {\r\n            getSubject(id).then(response => {\r\n                console.log('Data received:', response.data); // Log the received data\r\n                form.setFieldsValue(response.data);\r\n            }).catch(err => {\r\n                console.error('Error fetching subject', err.response || err); // Log the error response\r\n                message.error('Lỗi khi tải thông tin môn học');\r\n            });\r\n        }\r\n    }, [id, form]);\r\n\r\n    const handleSubmit = async (values) => {\r\n        const action = isEditing ? updateSubject(id, values) : createSubject(values);\r\n        try {\r\n            const result = await action;\r\n            console.log('Success:', result.data); // Log the success response\r\n            navigate('/subjects');\r\n            message.success('Lưu thông tin môn học thành công');\r\n        } catch (error) {\r\n            console.error('Save error:', error.response || error); // Log the error response\r\n            message.error('Lỗi khi lưu thông tin môn học');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: \"20px\", maxWidth: \"600px\", margin: \"0 auto\" }}>\r\n            <Breadcrumb style={{ margin: '16px 0' }}>\r\n                <Breadcrumb.Item>Trang chủ</Breadcrumb.Item>\r\n                <Breadcrumb.Item>Môn học</Breadcrumb.Item>\r\n                <Breadcrumb.Item>{isEditing ? 'Sửa môn học' : 'Thêm môn học'}</Breadcrumb.Item>\r\n            </Breadcrumb>\r\n            <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\r\n                <Form.Item name=\"name\" label=\"Tên môn học\" rules={[{ required: true, message: 'Vui lòng nhập tên môn học!' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"code\" label=\"Mã môn học\" rules={[{ required: true, message: 'Vui lòng nhập mã môn học!' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"status\" label=\"Trạng thái\" rules={[{ required: true, message: 'Vui lòng chọn trạng thái!' }]}>\r\n                    <Select placeholder=\"Chọn trạng thái\">\r\n                        <Option value=\"active\">Hoạt động</Option>\r\n                        <Option value=\"inactive\">Không hoạt động</Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\">{isEditing ? 'Cập nhật' : 'Thêm mới'}</Button>\r\n                    {isEditing && (\r\n                        <Button style={{ marginLeft: '8px' }} onClick={() => form.resetFields()} danger>\r\n                            Hủy bỏ\r\n                        </Button>\r\n                    )}\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default subjectForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}